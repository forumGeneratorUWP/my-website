<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SecondaryPage</title>
  <style>* { box-sizing: border-box; } body {margin: 0;}*{box-sizing:border-box;}body{margin:0;}*{box-sizing:border-box;}body{margin:0;}.gjs-row{width:100%;display:table;padding:10px;}.gjs-cell{width:8%;height:75px;display:table-cell;}.internal-page-button{width:150px;border:1px solid white;height:30px;background-color:#7eabcd;}#ijx4t{left:10%;width:80%;position:relative;background-color:#84bed6;height:600px;}.support-ticket-form{top:100px;}.form-label{position:relative;font-size:20px;}.form-group{padding:0 0 10px 0;}#idptg{text-align:center;}.submit-button{padding:0 0 0 0;}@media fadeEffect{from{opacity:0;}to{opacity:1;}}@media (max-width: 768px){.gjs-cell{width:100%;display:block;}}</style>
</head>
<body><div id="ijx4t" class="gjs-row"><div id="it052" class="gjs-cell"><form class="support-ticket-form" id="ixk9t"><button data-page-name="indexPage" id="ibf1f" class="internal-page-button">Back</button><div class="gjs-row" id="idptg"><div class="gjs-cell"><form class="support-ticket-form" id="iuj4l"><div class="form-group"><label for="support-email" class="form-label">Your Email</label><input id="support-email" type="email" name="email" placeholder="you@example.com" required class="form-input"/></div><div class="form-group"><label for="support-message" class="form-label">Message</label><textarea id="support-message" name="message" placeholder="Describe your issue..." required class="form-textarea"></textarea></div><button type="submit" class="submit-button">Submit Ticket</button></form></div></div></form></div></div></body><script>var items = document.querySelectorAll('#ixk9t, #iuj4l');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
const form = this;
                    const baseURL = window?.ENV?.NEXT_PUBLIC_API_BASE_URL || 'https://forum-gen-backend-production.up.railway.app';
                    form.addEventListener('submit', async function(e) {
                        e.preventDefault();
                        const email = form.querySelector('[name="email"]')?.value?.trim();
                        const message = form.querySelector('[name="message"]')?.value?.trim();
                        const to = form.getAttribute('data-to-email');
                        const subject = form.getAttribute('data-email-subject');
                        if (!email || !message || !to) {
                            alert('Please fill in all required fields.');
                            return;
                        }
                        const endpoint = `${baseURL}/api/forum/example1DB/submit-ticket`;
                        try {
                            const res = await fetch(endpoint, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    email,
                                    message,
                                    to,
                                    subject
                                })
                            });
                            if (!res.ok) throw new Error('Submission failed');
                            alert('✅ Ticket submitted successfully!');
                            form.reset();
                        } catch (err) {
                            alert('❌ Error: ' + err.message);
                        }
                    });
}.bind(items[i]))();
          }
          var items = document.querySelectorAll('#ibf1f');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
const el = this;
                    const name = el.getAttribute('data-page-name') || 'SecondaryPage';
                    el.addEventListener('click', ()=>{
                        const currentURL = window.location.href.replace(/\/$/, '');
                        const targetURL = `${currentURL}/${name}.html`;
                        window.location.href = targetURL;
                    });
}.bind(items[i]))();
          }</script>
</html>